# Private Poker Configuration
# Copy this file to .env and update with your values
# DO NOT commit .env file to version control
#
# All variables are prefixed with PP_ (Private Poker) to avoid conflicts
# Legacy non-prefixed variables are maintained for backward compatibility

# === Database Configuration ===
PP_POSTGRES_USER=postgres
PP_POSTGRES_PASSWORD=7794951
PP_POSTGRES_DB=poker_db
PP_POSTGRES_PORT=5432

# Connection string format:
# postgresql://user:password@host:port/database
PP_DATABASE_URL=postgresql://postgres:7794951@localhost:5432/poker_db
DATABASE_URL=postgresql://postgres:7794951@localhost:5432/poker_db  # Legacy (deprecated)

# Database pool settings
PP_DB_MAX_CONNECTIONS=100
PP_DB_MIN_CONNECTIONS=5
PP_DB_CONNECTION_TIMEOUT_SECS=5
PP_DB_IDLE_TIMEOUT_SECS=300
PP_DB_MAX_LIFETIME_SECS=1800

# === Security Configuration ===
# Generate with: openssl rand -hex 32
PP_JWT_SECRET=change-me-to-a-secure-random-string-minimum-32-bytes
JWT_SECRET=change-me-to-a-secure-random-string-minimum-32-bytes  # Legacy (deprecated)

# Password pepper - additional server-side secret for hashing
# Generate with: openssl rand -hex 16
PP_PASSWORD_PEPPER=change-me-to-a-secure-random-16-bytes-hex
PASSWORD_PEPPER=change-me-to-a-secure-random-16-bytes-hex  # Legacy (deprecated)

# JWT token expiry (seconds)
PP_JWT_ACCESS_TOKEN_EXPIRY=3600        # 1 hour
PP_JWT_REFRESH_TOKEN_EXPIRY=2592000    # 30 days

# === Server Configuration ===
PP_SERVER_BIND=0.0.0.0:8080
PP_SERVER_PORT=8080

# Metrics endpoint (Prometheus scrape target)
PP_METRICS_BIND=0.0.0.0:9090

# Timeouts (seconds)
PP_ACTION_TIMEOUT_SECS=30
PP_CONNECT_TIMEOUT_SECS=5
PP_POLL_TIMEOUT_SECS=1
PP_STEP_TIMEOUT_SECS=5

# Connection limits
PP_MAX_CONNECTIONS=1000
PP_MAX_TABLES=100
PP_MAX_CONNECTIONS_PER_IP=5
PP_MAX_CONNECTIONS_PER_WINDOW=10

# Network configuration
PP_MAX_MESSAGE_SIZE_BYTES=1048576  # 1MB
PP_READ_TIMEOUT_SECS=10
PP_WRITE_TIMEOUT_SECS=1
PP_MAX_NETWORK_EVENTS_PER_USER=6

# Table configuration
PP_TABLE_MAX_PLAYERS=9
PP_TABLE_SMALL_BLIND=10
PP_TABLE_BIG_BLIND=20
PP_TABLE_MIN_BUY_IN_BB=50
PP_TABLE_MAX_BUY_IN_BB=200
PP_TABLE_TOP_UP_COOLDOWN_HANDS=20
PP_ABSOLUTE_CHIP_CAP=100000

# === Wallet Configuration ===
PP_DEFAULT_WALLET_BALANCE=1000
PP_FAUCET_AMOUNT=1000
PP_FAUCET_COOLDOWN_HOURS=24
PP_FAUCET_MIN_BALANCE_THRESHOLD=100

# === Logging Configuration ===
# Options: error, warn, info, debug, trace
PP_RUST_LOG=info
RUST_LOG=info  # Standard Rust env var (not prefixed)

# Log format: compact, pretty, json
PP_LOG_FORMAT=compact

# === Rate Limiting Configuration ===
# Login rate limit
PP_RATE_LIMIT_LOGIN_ATTEMPTS=5
PP_RATE_LIMIT_LOGIN_WINDOW_SECS=300       # 5 minutes
PP_RATE_LIMIT_LOGIN_LOCKOUT_SECS=900      # 15 minutes

# Registration rate limit
PP_RATE_LIMIT_REGISTER_ATTEMPTS=3
PP_RATE_LIMIT_REGISTER_WINDOW_SECS=3600   # 1 hour
PP_RATE_LIMIT_REGISTER_LOCKOUT_SECS=3600  # 1 hour

# Password reset rate limit
PP_RATE_LIMIT_RESET_ATTEMPTS=3
PP_RATE_LIMIT_RESET_WINDOW_SECS=3600      # 1 hour
PP_RATE_LIMIT_RESET_LOCKOUT_SECS=7200     # 2 hours

# Chat rate limit
PP_RATE_LIMIT_CHAT_ATTEMPTS=10
PP_RATE_LIMIT_CHAT_WINDOW_SECS=60         # 1 minute
PP_RATE_LIMIT_CHAT_LOCKOUT_SECS=300       # 5 minutes

# === Bot Configuration ===
PP_BOTS_ENABLED=true
PP_DEFAULT_BOT_DIFFICULTY=standard  # easy, standard, tag

# === Monitoring Configuration ===
PP_PROMETHEUS_PORT=9090
PP_GRAFANA_PORT=3000
PP_GRAFANA_USER=admin
PP_GRAFANA_PASSWORD=change_me

# Health check endpoint
PP_HEALTH_CHECK_ENABLED=true
PP_HEALTH_CHECK_PATH=/health

# === Email Configuration (for password reset) ===
PP_SMTP_HOST=smtp.example.com
PP_SMTP_PORT=587
PP_SMTP_USERNAME=noreply@example.com
PP_SMTP_PASSWORD=smtp_password
PP_SMTP_FROM=Private Poker <noreply@example.com>

# === Feature Flags ===
PP_FEATURE_2FA_ENABLED=true
PP_FEATURE_CHAT_ENABLED=true
PP_FEATURE_BOTS_ENABLED=true
PP_FEATURE_PRIVATE_TABLES_ENABLED=true
PP_FEATURE_TOURNAMENTS_ENABLED=false

# === Development Settings ===
# Only use in development!
PP_DEV_MODE=false
PP_DEV_SKIP_AUTH=false
PP_DEV_SEED_DATABASE=false
